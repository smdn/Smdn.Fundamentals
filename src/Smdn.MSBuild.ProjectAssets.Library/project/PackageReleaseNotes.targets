<!--
SPDX-FileCopyrightText: 2023 smdn <smdn@smdn.jp>
SPDX-License-Identifier: MIT
-->
<Project>
  <Target
    Name="GenerateNupkgReleaseNote"
    BeforeTargets="GenerateNuspec"
    DependsOnTargets="SmdnWorkflowsDotNet_DefineProperties"
    Condition=" '$(PackageReleaseNotes)' == '' "
  >
    <PropertyGroup Condition="$(RepositoryUrl.StartsWith('https://github.com/'))">
      <_ReleaseTagUrlEscaped>$(SmdnWorkflowsDotNetExpectedReleaseTag.Replace('/', '%252F').Replace('+', '%252B'))</_ReleaseTagUrlEscaped>

      <PackageReleaseNotes
        Condition=" '$(PackageReleaseNotes)' == ''"
      ><![CDATA[See the release notes for [$(PackageId) version $(PackageVersion)]($([MSBuild]::EnsureTrailingSlash('$(RepositoryUrl)'))releases/tag/$(_ReleaseTagUrlEscaped)) on GitHub Releases.]]>
      </PackageReleaseNotes>
    </PropertyGroup>
  </Target>
</Project>
