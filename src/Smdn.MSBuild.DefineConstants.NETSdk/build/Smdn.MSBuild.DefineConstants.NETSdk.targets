<!--
SPDX-FileCopyrightText: 2021 smdn <smdn@smdn.jp>
SPDX-License-Identifier: MIT
-->
<Project>
  <!-- *_OR_GREATER are defined in AddImplicitDefineConstants of Microsoft.NET.Sdk.BeforeCommon.targets -->
  <Target
    Name="AddNETSdkApiDefineConstants"
    DependsOnTargets="AddImplicitDefineConstants"
    BeforeTargets="CoreCompile"
  >
    <PropertyGroup>
      <!-- NET46_OR_GREATER || NETSTANDARD1_3_OR_GREATER || NETCOREAPP1_0_OR_GREATER || NET5_0_OR_GREATER -->
      <DefineConstants Condition="
        $([System.Text.RegularExpressions.Regex]::IsMatch('$(DefineConstants)', '\bNET46_OR_GREATER\b')) Or
        $([System.Text.RegularExpressions.Regex]::IsMatch('$(DefineConstants)', '\bNETSTANDARD1_3_OR_GREATER\b')) Or
        $([System.Text.RegularExpressions.Regex]::IsMatch('$(DefineConstants)', '\bNETCOREAPP1_0_OR_GREATER\b')) Or
        $([System.Text.RegularExpressions.Regex]::IsMatch('$(DefineConstants)', '\bNET5_0_OR_GREATER\b'))
      ">$(DefineConstants);SYSTEM_ARRAY_EMPTY;SYSTEM_FORMATTABLESTRING;SYSTEM_THREADING_TASKS_TASK_COMPLETEDTASK;SYSTEM_THREADING_TASKS_TASK_FROMCANCELED</DefineConstants>

      <!-- NETFRAMEWORK || NETSTANDARD2_0_OR_GREATER || NETCOREAPP2_0_OR_GREATER || NET5_0_OR_GREATER -->
      <DefineConstants Condition="
        $([System.Text.RegularExpressions.Regex]::IsMatch('$(DefineConstants)', '\bNETFRAMEWORK\b')) Or
        $([System.Text.RegularExpressions.Regex]::IsMatch('$(DefineConstants)', '\bNETSTANDARD2_0_OR_GREATER\b')) Or
        $([System.Text.RegularExpressions.Regex]::IsMatch('$(DefineConstants)', '\bNETCOREAPP2_0_OR_GREATER\b')) Or
        $([System.Text.RegularExpressions.Regex]::IsMatch('$(DefineConstants)', '\bNET5_0_OR_GREATER\b'))
      ">$(DefineConstants);SYSTEM_ARRAY_CONVERTALL;SYSTEM_CONVERTER;SYSTEM_EXCEPTION_CTOR_SERIALIZATIONINFO;SYSTEM_ICLONEABLE;SYSTEM_MATH_DIVREM;SYSTEM_DIAGNOSTICS_PROCESS;SYSTEM_IO_STREAM_CLOSE;SYSTEM_NET_NETWORKINFORMATION_PHYSICALADDRESS;SYSTEM_SECURITY_CRYPTOGRAPHY_HASHALGORITHM_CLEAR</DefineConstants>

      <!-- NETFRAMEWORK -->
      <DefineConstants Condition="
        $([System.Text.RegularExpressions.Regex]::IsMatch('$(DefineConstants)', '\bNETFRAMEWORK\b'))
      ">$(DefineConstants);SYSTEM_TEXT_ENCODING_DEFAULT_ANSI</DefineConstants>

      <!-- NETSTANDARD2_1_OR_GREATER || NETCOREAPP2_0_OR_GREATER || NET5_0_OR_GREATER -->
      <DefineConstants Condition="
        $([System.Text.RegularExpressions.Regex]::IsMatch('$(DefineConstants)', '\bNETSTANDARD2_1_OR_GREATER\b')) Or
        $([System.Text.RegularExpressions.Regex]::IsMatch('$(DefineConstants)', '\bNETCOREAPP2_0_OR_GREATER\b')) Or
        $([System.Text.RegularExpressions.Regex]::IsMatch('$(DefineConstants)', '\bNET5_0_OR_GREATER\b'))
      ">$(DefineConstants);SYSTEM_ARRAYSEGMENT_SLICE;SYSTEM_STRING_STARTSWITH_CHAR;SYSTEM_COLLECTIONS_GENERIC_KEYVALUEPAIR_CREATE;SYSTEM_IO_PATH_GETRELATIVEPATH</DefineConstants>

      <!-- NETSTANDARD2_1_OR_GREATER || NETCOREAPP2_1_OR_GREATER || NET5_0_OR_GREATER -->
      <DefineConstants Condition="
        $([System.Text.RegularExpressions.Regex]::IsMatch('$(DefineConstants)', '\bNETSTANDARD2_1_OR_GREATER\b')) Or
        $([System.Text.RegularExpressions.Regex]::IsMatch('$(DefineConstants)', '\bNETCOREAPP2_1_OR_GREATER\b')) Or
        $([System.Text.RegularExpressions.Regex]::IsMatch('$(DefineConstants)', '\bNET5_0_OR_GREATER\b'))
      ">$(DefineConstants);SYSTEM_STRING_CREATE;SYSTEM_STRING_CONTAINS_CHAR;SYSTEM_IO_STREAM_READASYNC_MEMORY_OF_BYTE;SYSTEM_IO_STREAM_WRITEASYNC_READONLYMEMORY_OF_BYTE</DefineConstants>

      <!-- NETSTANDARD2_1_OR_GREATER || NETCOREAPP3_0_OR_GREATER || NET5_0_OR_GREATER -->
      <DefineConstants Condition="
        $([System.Text.RegularExpressions.Regex]::IsMatch('$(DefineConstants)', '\bNETSTANDARD2_1_OR_GREATER\b')) Or
        $([System.Text.RegularExpressions.Regex]::IsMatch('$(DefineConstants)', '\bNETCOREAPP3_0_OR_GREATER\b')) Or
        $([System.Text.RegularExpressions.Regex]::IsMatch('$(DefineConstants)', '\bNET5_0_OR_GREATER\b'))
      ">$(DefineConstants);SYSTEM_INDEX;SYSTEM_RANGE</DefineConstants>

      <!-- NET5_0_OR_GREATER -->
      <DefineConstants Condition="
        $([System.Text.RegularExpressions.Regex]::IsMatch('$(DefineConstants)', '\bNET5_0_OR_GREATER\b'))
      ">$(DefineConstants);SYSTEM_THREADING_TASKS_VALUETASK_FROMCANCELED</DefineConstants>
    </PropertyGroup>
  </Target>
</Project>
